<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AccesoBarrio ğŸŒ</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 24 24%22 fill=%22%23006D77%22><path d=%22M12 2C8.1 2 5 5.1 5 9c0 5.2 7 13 7 13s7-7.8 7-13c0-3.9-3.1-7-7-7zm0 9.5a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5z%22/></svg>">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/estilos.css">
</head>
<body>

    <div id="loading-overlay">
        <div class="spinner"></div>
        <p style="margin-top: 20px; font-weight: 600; color: #006D77; font-family: 'Poppins';">Cargando mapa inclusivo...</p>
    </div>

    <main id="pantalla-inicio">
        <h1>AccesoBarrio ğŸŒ</h1>
        <p>Â¿QuÃ© necesitas saber hoy?</p>
        
        <div class="buscador-inicio-wrapper">
            <input type="text" id="input-inicio" placeholder="Busca un sitio (ej: Bar Pepe)..." onkeypress="if(event.key === 'Enter') buscarDesdeInicio()">
            <button onclick="buscarDesdeInicio()">ğŸ”</button>
        </div>

        <div class="filtros-rapidos">
            <button class="chip-todo" onclick="cargarResultados(null)">
                <span>ğŸ—ºï¸ Ver todo el mapa</span>
            </button>
        </div>

        <nav class="grid-categorias">
            <button class="boton-cat" onclick="cargarResultados('Auditiva')">
                <span class="emoji">ğŸ‘‚</span><span class="txt">Auditiva</span>
            </button>
            <button class="boton-cat" onclick="cargarResultados('Motora')">
                <span class="emoji">â™¿</span><span class="txt">Motora</span>
            </button>
            <button class="boton-cat" onclick="cargarResultados('Cognitiva')">
                <span class="emoji">ğŸ§ </span><span class="txt">Cognitiva</span>
            </button>
            <button class="boton-cat" onclick="cargarResultados('Visual')">
                <span class="emoji">ğŸ‘ï¸</span><span class="txt">Visual</span>
            </button>
        </nav>

        <div class="info-extra-container">
            <div class="info-card impacto">
                <div class="icono-flotante">ğŸ“Š</div>
                <h3>Impacto del Barrio</h3>
                <div class="numeros-impacto">
                    <div class="dato">
                        <span id="contador-sitios" class="numero-grande">0</span>
                        <span class="etiqueta">Sitios</span>
                    </div>
                    <div class="separador"></div>
                    <div class="dato">
                        <span id="contador-tags" class="numero-grande">0</span>
                        <span class="etiqueta">Ayudas</span>
                    </div>
                </div>
            </div>

            <div class="info-card curiosidad">
                <div class="icono-flotante">ğŸ’¡</div>
                <h3>Â¿SabÃ­as quÃ©?</h3>
                <p id="texto-curiosidad">Cargando dato curioso...</p>
            </div>
        </div>
        <button class="boton-anadir-home" onclick="abrirFormulario()">+ AÃ±adir Sitio</button>
        
        <div class="firma-autor">
            <p>Â© 2026 SofÃ­a Fabiana Daniele | by Proyecto25</p>
            
            <div class="zona-admin" style="text-align:center; margin-top:8px;">
                <button id="btn-login" onclick="iniciarSesionAdmin()" style="background:none; border:none; color:#ccc; font-size:11px; cursor:pointer;">ğŸ”’ Acceso Admin</button>
                <button id="btn-logout" onclick="cerrarSesionAdmin()" style="display:none; background:#ff4444; color:white; border:none; padding:5px 10px; border-radius:15px; font-size:11px; cursor:pointer;">ğŸ”“ Cerrar SesiÃ³n</button>
            </div>
            </div>
    </main>

    <div id="pantalla-resultados" style="display: none;">
        <div class="barra-superior-pro">
            <button onclick="location.reload()" class="btn-circular">â¬…</button>
            <div style="display: flex; gap: 8px;">
                <button class="btn-lista-pill" onclick="abrirModalFiltros()">âš™ï¸ Filtros</button>
                <button class="btn-lista-pill" onclick="alternarVista()" id="btn-vista">ğŸ“‹ Ver Lista</button>
            </div>
        </div>
        
        <div id="contenedor-mapa-pro">
            <div class="buscador-mapa-flotante">
                <div class="buscador-pill">
                    <input type="text" id="buscador-texto" placeholder="Buscar sitio o ciudad..." 
                           onkeypress="if(event.key === 'Enter') superBuscador()">
                    <button onclick="superBuscador()" style="background:none; border:none; cursor:pointer; font-size:18px;">
                        ğŸ”
                    </button>
                </div>
            </div>
            
            <button onclick="centrarEnMi()" class="btn-gps" title="Mi ubicaciÃ³n">Mi ubicaciÃ³n actual ğŸ“</button>

            <div id="mapa"></div>
        </div>

        <div id="vista-lista" style="display: none;">
            <div class="buscador-zona-wrapper">
                <div class="buscador-pill">
                    <span class="icono">ğŸ™ï¸</span>
                    <input type="text" id="inputBuscadorZona" placeholder="Filtrar por ciudad..." onkeyup="filtrarPorZona()">
                </div>
                <ul id="sugerenciasZona" class="sugerencias-lista"></ul>
            </div>
            <div id="contenedor-items-lista"></div>
        </div>
    </div>

    <div id="modal-filtros" class="modal-personalizado">
        <div class="contenido-modal">
            <h2>âš™ï¸ Filtrar por requisitos</h2>
            <div class="grid-checks-pro">
                <label><input type="checkbox" class="filtro-check" value="Rampa"> â™¿ Rampa</label>
                <label><input type="checkbox" class="filtro-check" value="BaÃ±o"> ğŸš» BaÃ±o</label>
                <label><input type="checkbox" class="filtro-check" value="Calma"> ğŸ§  Calma</label>
                <label><input type="checkbox" class="filtro-check" value="Braille"> ğŸ‘ï¸ Braille</label>
                <label><input type="checkbox" class="filtro-check" value="Pictogramas"> ğŸ§© Pictos</label>
                <label><input type="checkbox" class="filtro-check" value="LSA"> ğŸ‘‹ SeÃ±as</label>
                <label><input type="checkbox" class="filtro-check" value="Aro"> ğŸ‘‚ Aro Mag.</label>
                <label><input type="checkbox" class="filtro-check" value="Podotactil"> ğŸ‘£ Piso Podot.</label>
                <label><input type="checkbox" class="filtro-check" value="Perro"> ğŸ• Perro GuÃ­a</label>
            </div>
            <button class="btn-principal" onclick="aplicarFiltrosMultiples()">Aplicar Filtros</button>
            <button class="btn-secundario" onclick="cerrarModalFiltros()">Cerrar</button>
        </div>
    </div>

    <div id="modal-anadir" class="modal-personalizado">
        <div class="contenido-modal">
            <h2>ğŸ“ Registrar Espacio</h2>
            <div class="scroll-form">
                
                <input type="hidden" id="campo-localidad-oculto">
                
                <input type="text" id="nombre" placeholder="Nombre del lugar">
                <textarea id="descripcion" placeholder="Detalles de accesibilidad..."></textarea>
                
                <p class="titulo-seccion">CategorÃ­as:</p>
                <div class="grid-checks-pro">
                    <label><input type="checkbox" class="cat-check" value="Rampa"> â™¿ Rampa</label>
                    <label><input type="checkbox" class="cat-check" value="BaÃ±o"> ğŸš» BaÃ±o</label>
                    <label><input type="checkbox" class="cat-check" value="Calma"> ğŸ§  Calma</label>
                    <label><input type="checkbox" class="cat-check" value="Braille"> ğŸ‘ï¸ Braille</label>
                    <label><input type="checkbox" class="cat-check" value="Pictogramas"> ğŸ§© Pictos</label>
                    <label><input type="checkbox" class="cat-check" value="LSA"> ğŸ‘‹ SeÃ±as</label>
                    <label><input type="checkbox" class="cat-check" value="Aro"> ğŸ‘‚ Aro Mag.</label>
                    <label><input type="checkbox" class="cat-check" value="Podotactil"> ğŸ‘£ Piso Podot.</label>
                    <label><input type="checkbox" class="cat-check" value="Perro"> ğŸ• Perro GuÃ­a</label>
                </div>

                <p class="titulo-seccion">DirecciÃ³n exacta:</p>
                <div class="buscador-direccion-wrapper">
                    <input type="text" id="input-direccion" placeholder="Ej: Sarmiento 100, San Nicolas">
                    <button onclick="buscarDireccion()">ğŸ”</button>
                </div>

                <div id="mapa-seleccion"></div>
                <button class="btn-principal" onclick="guardarSitio()">Guardar Sitio</button>
                <button class="btn-secundario" onclick="cerrarModal()">Cancelar</button>
            </div>
        </div>
    </div>

    <button id="btn-accesibilidad" aria-label="Abrir panel de accesibilidad" class="access-btn">
      â™¿
    </button>
    
    <div id="panel-accesibilidad" class="access-panel hidden" aria-hidden="true">
      <h3>Accesibilidad</h3>
      
      <div class="access-option">
        <span>TamaÃ±o Texto</span>
        <button onclick="cambiarTexto(1)">A+</button>
        <button onclick="cambiarTexto(-1)">A-</button>
      </div>
    
      <div class="access-option">
        <span>Contraste</span>
        <button onclick="toggleContraste()">ğŸŒ—</button>
      </div>
    
      <div class="access-option">
        <span>Dislexia</span>
        <button onclick="toggleDislexia()">ğŸ§ </button>
      </div>
      
      <div class="access-option">
        <span>Animaciones</span>
        <button onclick="toggleAnimaciones()">â¯ï¸</button>
      </div>
    
      <button onclick="resetAccesibilidad()" class="btn-reset">Restablecer</button>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="js/app.js"></script>
</body>
</html>